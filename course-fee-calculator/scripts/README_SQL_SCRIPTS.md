# SQL è„šæœ¬ä½¿ç”¨è¯´æ˜

## ğŸ“‹ è„šæœ¬åˆ—è¡¨

### 1. `check_and_reset_tables.sql` - å®Œæ•´é‡ç½®è„šæœ¬
**ç”¨é€”**ï¼šå®Œå…¨é‡å»ºæ‰€æœ‰è¡¨ç»“æ„å¹¶æ¸…ç©ºæ•°æ®
**ä½¿ç”¨åœºæ™¯**ï¼š
- åˆæ¬¡è®¾ç½®æ•°æ®åº“
- éœ€è¦å®Œå…¨é‡æ–°å¼€å§‹æµ‹è¯•
- è¡¨ç»“æ„æœ‰é‡å¤§å˜æ›´

**æ‰§è¡Œæ­¥éª¤**ï¼š
1. ç™»å½• Supabase Dashboard
2. è¿›å…¥ SQL Editor
3. å¤åˆ¶å¹¶ç²˜è´´ `check_and_reset_tables.sql` å†…å®¹
4. ç‚¹å‡» "Run" æ‰§è¡Œ

**âš ï¸ è­¦å‘Š**ï¼šæ­¤è„šæœ¬ä¼šåˆ é™¤æ‰€æœ‰ç°æœ‰æ•°æ®ï¼

### 2. `check_tables_only.sql` - ç»“æ„æ£€æŸ¥è„šæœ¬
**ç”¨é€”**ï¼šæ£€æŸ¥å¹¶ä¿®å¤è¡¨ç»“æ„ï¼Œä¿ç•™ç°æœ‰æ•°æ®
**ä½¿ç”¨åœºæ™¯**ï¼š
- æ£€æŸ¥è¡¨ç»“æ„æ˜¯å¦æ­£ç¡®
- æ·»åŠ ç¼ºå¤±å­—æ®µ
- ç§»é™¤é”™è¯¯å­—æ®µ
- ä¿ç•™ç°æœ‰æ•°æ®

**æ‰§è¡Œæ­¥éª¤**ï¼š
1. ç™»å½• Supabase Dashboard
2. è¿›å…¥ SQL Editor
3. å¤åˆ¶å¹¶ç²˜è´´ `check_tables_only.sql` å†…å®¹
4. ç‚¹å‡» "Run" æ‰§è¡Œ

### 3. `001_create_tables.sql` - åˆå§‹åˆ›å»ºè„šæœ¬
**ç”¨é€”**ï¼šåˆ›å»ºåˆå§‹è¡¨ç»“æ„
**ä½¿ç”¨åœºæ™¯**ï¼šæ–°é¡¹ç›®åˆå§‹åŒ–

### 4. `002_remove_dynamic_fields_from_students.sql` - è¿ç§»è„šæœ¬
**ç”¨é€”**ï¼šç§»é™¤ students è¡¨ä¸­çš„åŠ¨æ€å­—æ®µ
**ä½¿ç”¨åœºæ™¯**ï¼šæ•°æ®åº“ç»“æ„ä¼˜åŒ–

### 5. `003_add_language_field_to_students.sql` - è¿ç§»è„šæœ¬
**ç”¨é€”**ï¼šä¸º students è¡¨æ·»åŠ  language å­—æ®µ
**ä½¿ç”¨åœºæ™¯**ï¼šæ·»åŠ æ–°åŠŸèƒ½

## ğŸ¯ æ¨èä½¿ç”¨æµç¨‹

### é¦–æ¬¡è®¾ç½®
```sql
-- ä½¿ç”¨å®Œæ•´é‡ç½®è„šæœ¬
-- æ‰§è¡Œ check_and_reset_tables.sql
```

### æ—¥å¸¸æ£€æŸ¥
```sql
-- ä½¿ç”¨ç»“æ„æ£€æŸ¥è„šæœ¬
-- æ‰§è¡Œ check_tables_only.sql
```

### æ•°æ®å¤‡ä»½
åœ¨æ‰§è¡Œä»»ä½•è„šæœ¬å‰ï¼Œå»ºè®®å…ˆå¤‡ä»½é‡è¦æ•°æ®ï¼š
```sql
-- å¤‡ä»½å­¦ç”Ÿæ•°æ®
SELECT * FROM students;

-- å¤‡ä»½è¯¾ç¨‹æ•°æ®
SELECT * FROM processed_schedule_data;
```

## ğŸ“Š è¡¨ç»“æ„è¯´æ˜

### students è¡¨
- `id` - ä¸»é”®
- `name` - å­¦ç”Ÿå§“åï¼ˆå”¯ä¸€ï¼‰
- `fee_per_hour` - æ¯å°æ—¶æ ‡å‡†è´¹ç”¨
- `graduated` - å­¦ç”ŸçŠ¶æ€
- `parent` - å®¶é•¿å§“å
- `accompany_number` - é™ªåŒç¼–å·
- `language` - å­¦ç”Ÿè¯­è¨€åå¥½
- `created_at` - åˆ›å»ºæ—¶é—´

### schedule_data è¡¨
- `id` - ä¸»é”®
- `title` - è¯¾ç¨‹æ ‡é¢˜
- `startdate` - å¼€å§‹æ—¶é—´
- `enddate` - ç»“æŸæ—¶é—´
- `duration` - æŒç»­æ—¶é—´
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

### processed_schedule_data è¡¨
- `id` - ä¸»é”®
- `title` - è¯¾ç¨‹æ ‡é¢˜
- `startdate` - å¼€å§‹æ—¶é—´
- `enddate` - ç»“æŸæ—¶é—´
- `duration` - æŒç»­æ—¶é—´
- `hours` - å°æ—¶æ•°
- `date` - æ—¥æœŸ
- `name` - å­¦ç”Ÿå§“å
- `fee_per_hour` - æ¯å°æ—¶è´¹ç”¨
- `graduated` - å­¦ç”ŸçŠ¶æ€
- `parent` - å®¶é•¿å§“å
- `accompany_number` - é™ªåŒç¼–å·
- `fee_total` - æ€»è´¹ç”¨ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é”™è¯¯**
   - ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Supabase é¡¹ç›®
   - æ£€æŸ¥ API å¯†é’¥æ˜¯å¦æ­£ç¡®

2. **è¡¨å·²å­˜åœ¨é”™è¯¯**
   - ä½¿ç”¨ `check_and_reset_tables.sql` å®Œå…¨é‡å»º
   - æˆ–ä½¿ç”¨ `check_tables_only.sql` æ£€æŸ¥ç»“æ„

3. **å­—æ®µç±»å‹é”™è¯¯**
   - æ£€æŸ¥æ•°æ®ç±»å‹æ˜¯å¦åŒ¹é…
   - ä½¿ç”¨ ALTER TABLE ä¿®æ”¹å­—æ®µç±»å‹

### éªŒè¯è„šæœ¬æ‰§è¡Œç»“æœ

æ‰§è¡Œè„šæœ¬åï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š
1. è¡¨ç»“æ„æ˜¯å¦æ­£ç¡®
2. ç´¢å¼•æ˜¯å¦åˆ›å»º
3. æ•°æ®æ˜¯å¦å®Œæ•´
4. æƒé™æ˜¯å¦æ­£ç¡®è®¾ç½®

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Supabase é¡¹ç›®çŠ¶æ€
2. ç½‘ç»œè¿æ¥
3. SQL è¯­æ³•é”™è¯¯
4. æƒé™è®¾ç½®
